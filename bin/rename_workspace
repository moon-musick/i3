#!/bin/bash

CURRENT_WORKSPACE="$(
  i3-msg -t get_workspaces                    |
  jq '.[] | select(.focused == true) | .name' |
  tr -d '""'
)"

ALL_WORKSPACES="$(
  i3-msg -t get_workspaces  |
  jq '.[] | .name'          |
  tr -d '"'                 |
  tr '\n' ' '               |
  sed 's/ $//'
)"

NEW_NAME="$(
  echo "${CURRENT_WORKSPACE}" |
  rofi -dmenu -p "[${ALL_WORKSPACES}] Rename '${CURRENT_WORKSPACE}' to: "
)"

if [ -n "${NEW_NAME}" ]; then
  i3-msg "rename workspace ${CURRENT_WORKSPACE} to ${NEW_NAME}"
fi
